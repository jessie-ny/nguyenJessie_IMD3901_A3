<!DOCTYPE html>
<html>
    <head>
        <title>3D together</title>
        <meta charset="utf-8" />
        <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>

        <!-- //VERY HANDY! https://socket.io/docs/v3/emit-cheatsheet/  -->
        <!-- since we are going to put teh socket.io code in a component to make sure aframe is loaded before
        we start doing anything it, we will put the code in the header so that teh component "exists" before we 
        use it as an attribute on a-scene -->
        <script src="/socket.io/socket.io.js"></script>
        <script>
            AFRAME.registerComponent('experience-manager', {
                init: function () {
                    const socket = io();

                socket.on('connect', (userData) => {
                    console.log('I exist!');

                    //put code here so that we know that socket.io has initailized ...

                document.querySelector('#box1').addEventListener('click', function(){
                    socket.emit('box1click');
                });

                document.querySelector('#box2').addEventListener('click', function(){
                    socket.emit('box2click');
                });

                document.querySelector('#box3').addEventListener('click', function(){
                    socket.emit('box3click');
                });


                document.querySelector('#box4').addEventListener('click', function(){
                    socket.emit('box4click');
                });

                document.querySelector('#box5').addEventListener('click', function(){
                    socket.emit('box5click');
                });

                document.querySelector('#box6').addEventListener('click', function(){
                    socket.emit('box6click');
                });

                document.querySelector('#box7').addEventListener('click', function(){
                    socket.emit('box7click');
                });

                document.querySelector('#box8').addEventListener('click', function(){
                    socket.emit('box8click');
                });

                document.querySelector('#box9').addEventListener('click', function(){
                    socket.emit('box9click');
                });

                document.querySelector('#box10').addEventListener('click', function(){
                    socket.emit('box10click');
                });

                document.querySelector('#box11').addEventListener('click', function(){
                    socket.emit('box11click');
                });

                document.querySelector('#box12').addEventListener('click', function(){
                    socket.emit('box12click');
                });

                document.querySelector('#box13').addEventListener('click', function(){
                    socket.emit('box13click');
                });

                document.querySelector('#box14').addEventListener('click', function(){
                    socket.emit('box14click');
                });

                document.querySelector('#box15').addEventListener('click', function(){
                    socket.emit('box15click');
                });

                document.querySelector('#box16').addEventListener('click', function(){
                    socket.emit('box16click');
                });

                document.querySelector('#box17').addEventListener('click', function(){
                    socket.emit('box17click');
                });

                document.querySelector('#box18').addEventListener('click', function(){
                    socket.emit('box18click');
                });

                document.querySelector('#box19').addEventListener('click', function(){
                    socket.emit('box19click');
                });

                document.querySelector('#box20').addEventListener('click', function(){
                    socket.emit('box20click');
                });

                document.querySelector('#box21').addEventListener('click', function(){
                    socket.emit('box21click');
                });

                document.querySelector('#box22').addEventListener('click', function(){
                    socket.emit('box22click');
                });

                document.querySelector('#box23').addEventListener('click', function(){
                    socket.emit('box23click');
                });

                document.querySelector('#box24').addEventListener('click', function(){
                    socket.emit('box24click');
                });

                document.querySelector('#box25').addEventListener('click', function(){
                    socket.emit('box25click');
                });

                document.querySelector('#box26').addEventListener('click', function(){
                    socket.emit('box26click');
                });

                document.querySelector('#box27').addEventListener('click', function(){
                    socket.emit('box27click');
                });

                document.querySelector('#box28').addEventListener('click', function(){
                    socket.emit('box28click');
                });

                document.querySelector('#box29').addEventListener('click', function(){
                    socket.emit('box29click');
                });

                document.querySelector('#box30').addEventListener('click', function(){
                    socket.emit('box30click');
                });

                });

                //listen to event from server
                socket.on('box1_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box1').setAttribute('material', {color:colorStr});
                });

                socket.on('box2_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box2').setAttribute('material', {color:colorStr});
                });

                socket.on('box3_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box3').setAttribute('material', {color:colorStr});
                });

                socket.on('box4_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box4').setAttribute('material', {color:colorStr});
                });

                socket.on('box5_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box5').setAttribute('material', {color:colorStr});
                });

                socket.on('box6_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box6').setAttribute('material', {color:colorStr});
                });

                socket.on('box7_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box7').setAttribute('material', {color:colorStr});
                });

                socket.on('box8_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box8').setAttribute('material', {color:colorStr});
                });

                socket.on('box9_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box9').setAttribute('material', {color:colorStr});
                });

                socket.on('box10_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box10').setAttribute('material', {color:colorStr});
                });

                socket.on('box11_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box11').setAttribute('material', {color:colorStr});
                });

                socket.on('box12_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box12').setAttribute('material', {color:colorStr});
                });

                socket.on('box13_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box13').setAttribute('material', {color:colorStr});
                });

                socket.on('box14_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box14').setAttribute('material', {color:colorStr});
                });

                socket.on('box15_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box15').setAttribute('material', {color:colorStr});
                });

                socket.on('box16_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box16').setAttribute('material', {color:colorStr});
                });

                socket.on('box17_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box17').setAttribute('material', {color:colorStr});
                });

                socket.on('box18_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box18').setAttribute('material', {color:colorStr});
                });

                socket.on('box19_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box19').setAttribute('material', {color:colorStr});
                });

                socket.on('box20_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box20').setAttribute('material', {color:colorStr});
                });

                socket.on('box21_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box21').setAttribute('material', {color:colorStr});
                });

                socket.on('box22_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box22').setAttribute('material', {color:colorStr});
                });

                socket.on('box23_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box23').setAttribute('material', {color:colorStr});
                });

                socket.on('box24_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box24').setAttribute('material', {color:colorStr});
                });

                socket.on('box25_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box25').setAttribute('material', {color:colorStr});
                });

                socket.on('box26_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box26').setAttribute('material', {color:colorStr});
                });

                socket.on('box27_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box27').setAttribute('material', {color:colorStr});
                });

                socket.on('box28_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box28').setAttribute('material', {color:colorStr});
                });

                socket.on('box29_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box29').setAttribute('material', {color:colorStr});
                });

                socket.on('box30_color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ',' + data.g + ',' + data.b + ')';
                    console.log('color_change:' + colorStr);
                    document.querySelector('#box30').setAttribute('material', {color:colorStr});
                });

                }
            })
        </script>

    </head>

    <body>
        <!-- our buttond to tell others -->
        <!-- <button id="red" style="background-color:rgb(255, 0, 0); color:rgb(255, 255, 255)">RED</button>
        <button id="blue" style="background-color:rgb(0, 0, 255); color:rgb(255, 255, 255)">BLUE</button> -->

        <a-scene experience-manager background="color:rgb(190, 240, 243);">
            <a-entity position="0 -10 2">
                <a-entity camera wasd-controls look-controls position="0 1.6 0">
                    <!--adding a cursor component so that we can click on objects -->
                   <!-- cursor documentation: https://github.com/aframevr/aframe/blob/master/docs/components/cursor.md -->
                   <a-entity cursor="fuse: true; fuseTimeout: 500"
                   id = "cursor"
                   position="0 0 -1"
                   geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                   material="color: black; shader: flat"
                   animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 150; from: 0.1 0.1 0.1; to: 1 1 1"
                   animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1500; from: 1 1 1; to: 0.1 0.1 0.1"
                   animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500; to: 1 1 1">
                   </a-entity>
                    <a-entity cursor="rayOrigin:mouse;" raycaster="far:20; interval:200; objects:.interactive"></a-entity>
                </a-entity>
    
    
                <a-entity position="0.2 3 -2" id="instructions" text="value:Collaborative Minesweepr: Click on boxes to flip them over. Find all 4 red boxes. If you flip over a black box = game over.; color:black" height="1.5" width="3" scale="3 3 3"></a-entity>
            
                <a-entity id="board" position="0 1.5 -0.5">
                    <!--row1-->
                    <a-box id = "box1" color="rgb(255,255,255)" position="-1 1 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box2" color="rgb(255,255,255)" position="0 1 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box3" color="rgb(255,255,255)" position="1 1 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box4" color="rgb(255,255,255)" position="2 1 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box5" color="rgb(255,255,255)" position="3 1 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box6" color="rgb(255,255,255)" position="4 1 -2" height="0.5" width="0.5" depth="0.5"></a-box>

                     <!--row2-->
                    <a-box id = "box7" color="rgb(255,255,255)" position="-1 0 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box8" color="rgb(255,255,255)" position="0 0 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box9" color="rgb(255,255,255)" position="1 0 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box10" color="rgb(255,255,255)" position="2 0 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box11" color="rgb(255,255,255)" position="3 0 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box12" color="rgb(255,255,255)" position="4 0 -2" height="0.5" width="0.5" depth="0.5"></a-box>
        
                    <!--row3-->
                    <a-box id = "box13" color="rgb(255,255,255)" position="-1 -1 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box14" color="rgb(255,255,255)" position="0 -1 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box15" color="rgb(255,255,255)" position="1 -1 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box16" color="rgb(255,255,255)" position="2 -1 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box17" color="rgb(255,255,255)" position="3 -1 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box18" color="rgb(255,255,255)" position="4 -1 -2" height="0.5" width="0.5" depth="0.5"></a-box>

                     <!--row4-->
                     <a-box id = "box19" color="rgb(255,255,255)" position="-1 -2 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                     <a-box id = "box20" color="rgb(255,255,255)" position="0 -2 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                     <a-box id = "box21" color="rgb(255,255,255)" position="1 -2 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                     <a-box id = "box22" color="rgb(255,255,255)" position="2 -2 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                     <a-box id = "box23" color="rgb(255,255,255)" position="3 -2 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                     <a-box id = "box24" color="rgb(255,2550,255)" position="4 -2 -2" height="0.5" width="0.5" depth="0.5"></a-box>

                    <!--row5-->
                    <a-box id = "box25" color="rgb(255,255,255)" position="-1 -3 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box26" color="rgb(255,255,255)" position="0 -3 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box27" color="rgb(255,255,255)" position="1 -3 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box28" color="rgb(255,255,255)" position="2 -3 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box29" color="rgb(255,255,255)" position="3 -3 -2" height="0.5" width="0.5" depth="0.5"></a-box>
                    <a-box id = "box30" color="rgb(255,255,255)" position="4 -3 -2" height="0.5" width="0.5" depth="0.5"></a-box>

                </a-entity>
               

            </a-entity>
   


        </a-scene>
    </body>
</html>